<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NTP - Tecnep.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.6aa5eecd4ca7c47fb2ca9b0775a7bd787e3e64a2eadf0fef8c9f924498f49127.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="/"><img alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="/"><img alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="/docs/mailcleaner/">Mail Cleaner</a>
    </li>
    
    <li class="">
      <a href="/docs/hardening/">System Hardening</a>
    </li>
    
    <li class="">
      <a href="/docs/glassfish/">Glassfish</a>
    </li>
    
    <li class="active ">
      <a href="/docs/chrony/">NTP</a>
    </li>
    
    <li class="">
      <a href="/docs/redis/">Redis</a>
    </li>
    
    <li class="">
      <a href="/docs/dkim/">DKIM</a>
    </li>
    
    <li class="">
      <a href="/docs/spf/">SPF</a>
    </li>
    
    <li class="">
      <a href="/docs/system_resources/">Increase hard disk</a>
    </li>
    
    <li class="">
      <a href="/docs/zimbra-tips-tricks/">Zimbra Tips &amp; Tricks</a>
    </li>
    
    <li class="">
      <a href="/docs/kaspersky/">Kaspersky for linux</a>
    </li>
    
    <li class="">
      <a href="/docs/snmp/">SNMP</a>
    </li>
    
    <li class="">
      <a href="/docs/dmarc/">DMARC</a>
    </li>
    
    <li class="">
      <a href="/docs/firewall/">Firewall</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">NTP</h1>
<div class="content ">
  <p>NTP is an internet protocol thatâ€™s used to synchronise the clocks on computer networks to within a few milliseconds of universal coordinated time (UTC).</p>
<p>Chronyd is a daemon for synchronisation of the system clock. It can synchronise the clock with NTP servers, reference clocks and manual input using wristwatch and keyboard via chronyc. It can also operate as an NTPv4 server andpeer to provide a time service to other computers in the network.</p>
<p>Install chrony package</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">yum install chrony -y
</code></pre></div><p>Edit the confiugration file /etc/chrony.conf and add NTP server 10.13.222.1</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">vi /etc/chrony.conf
</code></pre></div><p>Comment the following line</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">#server 0.centos.pool.ntp.org iburst
#server 1.centos.pool.ntp.org iburst
#server 2.centos.pool.ntp.org iburst
#server 3.centos.pool.ntp.org iburst
</code></pre></div><p>Add following server host(for Nepal)  or your own NTP, if you have;</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">server 0.asia.pool.ntp.org iburst
server 1.asia.pool.ntp.org iburst
server 2.asia.pool.ntp.org iburst
server 3.asia.pool.ntp.org iburst
</code></pre></div><blockquote>
<p>The <strong>iburst</strong> server option is useful to speed up the initial synchronization. If an NTP server is unresponsive, the IBURST mode continues to send frequent queries until the server responds and time synchronization starts. <strong>BURST</strong> sends a burst of eight packets when the server is reachable. IBURST sends a burst of eight packets when the server is unreachable (tries to find out if a host is reachable), and then shorten the time until the first sync.</p>
</blockquote>
<p>Start chronyd service</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl start chronyd.service
</code></pre></div><p>Enable the service</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl enable chronyd.service
</code></pre></div><p>Verify the source of NTP server</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">chronyc sources
</code></pre></div><p>You will get something like:-</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">210 Number of sources = 4
MS Name/IP address         Stratum Poll Reach LastRx Last sample
===============================================================================
^- time.iqnet.com                2   6    35    36    -17ms[  -17ms] +/-  139ms
^+ undefined.hostname.local&gt;     2   6    17    38    -18ms[  -24ms] +/-  161ms
^* ntp.gnc.am                    2   6    17    37    +52ms[  +46ms] +/-  196ms
^+ x.ns.gin.ntt.net              2   6    17    38    -24ms[  -30ms] +/-  147ms
</code></pre></div><p>Verify using chronyc tracking for various time parameter</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">chronyc tracking
</code></pre></div><p>which outputs similar to:-</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">Reference ID    : 81FA23FA (x.ns.gin.ntt.net)
Stratum         : 3
Ref time (UTC)  : Mon Dec 09 05:32:41 2019
System time     : 0.010854832 seconds fast of NTP time
Last offset     : +0.013905714 seconds
RMS offset      : 0.023641668 seconds
Frequency       : 44.182 ppm slow
Residual freq   : -0.804 ppm
Skew            : 79.175 ppm
Root delay      : 0.289628744 seconds
Root dispersion : 0.007535583 seconds
Update interval : 64.5 seconds
Leap status     : Normal
</code></pre></div><p>Use following command for more detail :</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">timedatectl
</code></pre></div><p>Output:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">Local time: Mon 2019-12-09 11:19:56 +0545
Universal time: Mon 2019-12-09 05:34:56 UTC
RTC time: Mon 2019-12-09 05:34:56
Time zone: Asia/Kathmandu (+0545, +0545)
NTP enabled: yes
NTP synchronized: yes
RTC in local TZ: no
DST active: n/a
</code></pre></div><hr>
<p>Pratik Gautam
<a href="mailto:pratikgautm@gmail.com">pratikgautm@gmail.com</a></p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.tecnep.com">www.tecnep.com</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>


  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
